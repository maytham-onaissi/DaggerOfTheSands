using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class Invulnerability : MonoBehaviour
{
    [Header("Classes")]
    [SerializeField] PlayerController playerController;

    [Header("General")]
    private Renderer Renderer;
    private Color color;

    [Header("Specifications")]
    [SerializeField] private float waitTime;

   
    // Start is called before the first frame update
    void Start()
    {
        Renderer = GetComponent<Renderer>();
        color = Renderer.material.color;
    }

    private void Update()
    {
       


    }
    private void OnCollisionEnter2D(Collision2D collision)
    {
        if (collision.gameObject.tag == ("Enemy"))
        {
            if (playerController.health.currentHealth > 0)
                StartCoroutine(Invulnerable());
        }
    }
    private IEnumerator Invulnerable()
    {
        Physics2D.IgnoreLayerCollision(8, 9, true);

        Debug.Log("Invulnerable");

        Health.invulnerable = true;

        color.a = 0.5f;

        Renderer.material.color = color;

        yield return new WaitForSeconds(waitTime);

        Physics2D.IgnoreLayerCollision(8, 9, false);

        Debug.Log("Vulnerable");

        Health.invulnerable = false;

        color.a = 1f;

        Renderer.material.color = color;
    }

   

    
}
